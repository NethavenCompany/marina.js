var R=Object.defineProperty;var m=(s,t)=>{for(var e in t)R(s,e,{get:t[e],enumerable:!0})};var g={name:"@nethaven/marina",version:"1.0.0",description:"UI toolkit by Nethaven",keywords:["ui","ui toolkit","javascript"],homepage:"https://github.com/NethavenCompany/marina.js#readme",bugs:{url:"https://github.com/NethavenCompany/marina.js/issues"},repository:{type:"git",url:"git+https://github.com/NethavenCompany/marina.js.git"},license:"ISC",author:"Nethaven",type:"module",main:"dist/marina.global.js",module:"dist/marina.esm.js",browser:"dist/marina.global.js",exports:{".":{import:"./dist/marina.esm.js",require:"./dist/marina.global.js"}},scripts:{test:'echo "Error: no test specified" && exit 1',typecheck:"tsc --noEmit","generate:filetree-json":"node ./scripts/generate-filetree-json.js","build:esbuild":"node ./scripts/esbuild.js",build:"clear && npm run typecheck && npm run build:esbuild"},devDependencies:{esbuild:"^0.25.11",svgo:"^4.0.0"}};var c=g.version;var f={A4:{maxWidth:826,maxHeight:1066},A3:{maxWidth:1166,maxHeight:826},A2:{maxWidth:1166,maxHeight:826}};var v={};var u={};m(u,{Component:()=>b});var d=class extends HTMLElement{constructor(){super();this.settings={};this.settings={}}},b=d;var h={};m(h,{createElement:()=>l,createFile:()=>M,hex:()=>C,hsl:()=>L,lch:()=>P,minifyCss:()=>_,oklch:()=>H,resizeToAspectRatio:()=>A,rgb:()=>O,rgba:()=>I,setAttributes:()=>y,useLocalStore:()=>D,useSessionStore:()=>N});function l(s,t,e=[]){let r=document.createElement(s);y(r,t);for(let n of e)r.append(n);return r}function y(s,t){for(let[e,r]of Object.entries(t))switch(e){case"innerHTML":s[e]=r.trim();break;case"innerText":s[e]=r.trim();break;case"dataset":for(let[n,o]of Object.entries(r))s.dataset[n]=o;break;default:s[e]=r;break}return s}function M(s,t){if(!t.name)throw new Error('Missing property "name" is required');if(!t.type)throw new Error('Missing property "type" is required');let e=new Blob([s],{type:t.type}),r=URL.createObjectURL(e),n=l("a",{href:r,download:t.name,style:"display:none",dataset:{attached:!1}}),o=()=>{n.dataset.attached==="false"&&(document.body.appendChild(n),n.dataset.attached="true"),n.click()},a=()=>{document.body.removeChild(n),URL.revokeObjectURL(r)};return{file:e,url:r,filename:t.name,filetype:t.type,download:o,remove:a}}function A(s,t){let{maxWidth:e,maxHeight:r}=f[t],n=s.parentElement;if(!n)return;s.style.transform="";let o=n.clientWidth-40,a=n.clientHeight,S=Math.min(1,o/e),k=Math.min(1,a/r),w=Math.min(S,k);s.style.width=e+"px",s.style.height=r+"px",s.style.maxWidth=e+"px",s.style.maxHeight=r+"px",s.style.transformOrigin="top left",s.style.transform=`scale(${w})`}function C(){}function O(){}function I(){}function L(){}function P(){}function H(){}var p=class extends CustomEvent{constructor(t,e){super(t,{});for(let[r,n]of Object.entries(e))this[r]=n}},i=class{constructor(t,e={},r){this.subscriptions=new Map;this.get=t=>t?this.products[t]:this.products;this.has=t=>t in this.products;this.hasAll=t=>Object.keys(t).every(e=>this.has(e));this.set=t=>{let e={...this.products},r={...t};this.products={...this.products,...t},this.#e();let n={products:this.products,oldProducts:e,newProducts:r};return dispatchEvent(this.#t("set",n)),n};this.remove=(...t)=>{let e={...this.products},r={};t.forEach(o=>{r[o]=this.products[o],delete this.products[o]}),this.#e();let n={products:this.products,oldProducts:e,removedProducts:r};return dispatchEvent(this.#t("remove",n)),n};this.clear=()=>{let t={...this.products};this.products={},this.#e();let e={products:this.products,oldProducts:t};return dispatchEvent(this.#t("clear",e)),e};this.destroy=()=>{this.subscriptions.forEach((e,r)=>{this.unsubscribeElement(r)}),this.subscriptions.clear(),this.storage.removeItem(this.id);let t={products:this.products};return dispatchEvent(this.#t("destroy",t)),t};this.on=(t,e)=>{let r=`${this.id}__${t}`;addEventListener(r,n=>{e(n,this)})};this.subscribeElement=t=>{this.#s(t);let e=r=>this.#r(t,r);this.subscriptions.set(t,e),t.element.addEventListener(t.event,e)};this.unsubscribeElement=t=>{let e=this.subscriptions.get(t);e&&(t.element.removeEventListener(t.event,e),this.subscriptions.delete(t))};this.id=t,this.products=e,this.defaultProducts=e,this.storage=r,this.#n()}#s(t){let e=this.products[t.product];t.element.setAttribute(t.attribute,JSON.stringify(e)),t.cb&&t.cb(this)}#r(t,e){let n=e.target[t.attribute],o={};o[t.product]=n,this.set(o),t.cb&&t.cb(this)}#t(t,e={}){let r=`${this.id}__${t}`;return new p(r,e)}#e(){this.storage.setItem(this.id,JSON.stringify(this.products))}#n(){let t=this.storage.getItem(this.id);t&&(this.products={...this.products,...JSON.parse(t)}),this.#e()}};function E(s){return{id:s.id,products:s.products,get:s.get,has:s.has,hasAll:s.hasAll,set:s.set,remove:s.remove,clear:s.clear,destroy:s.destroy,on:s.on,subscribeElement:s.subscribeElement,unsubscribeElement:s.unsubscribeElement}}function N(s,t={}){let e=new i(s,t,sessionStorage);return E(e)}function D(s,t={}){let e=new i(s,t,localStorage);return E(e)}function _(...s){return s.join(" ").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s*{\s*/g,"{").replace(/;\s*/g,";").replace(/\s*}\s*/g,"}").replace(/:\s*/g,":").replace(/,\s*/g,",").replace(/\s+/g," ").trim()}console.log(`Marina v${c}`);var W={version:c,...v,...h,...u},x=W;var pt=x;export{b as Component,l as createElement,M as createFile,pt as default,C as hex,L as hsl,P as lch,_ as minifyCss,H as oklch,A as resizeToAspectRatio,O as rgb,I as rgba,y as setAttributes,D as useLocalStore,N as useSessionStore};
